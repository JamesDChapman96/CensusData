---
title: "Basic Tables"
author: "James Chapman"
output: html_notebook
---
# Working with Data Frames

## Scenario
You are the proprietor of a very small bookstore. You currently have the following books:

  - *The Waste Land* by T.S. Eliot (published 1922; 10 copies in stock; $8 each)  
  - *Lord of the Flies* by William Golding (published 1954; 16 copies in stock; $8 each)  
  - *Grapes of Wrath* by John Steinbeck (published 1939; 5 copies in stock; $10 each)  
  - *Pride and Prejudice* by Jane Austen (published 1813; 7 copies in stock; $15 each)  
  - *Frankenstein* by Mary Shelley (published 1818; 15 copies in stock; $5 each)  
  - *Little Women* by Louisa May Alcott (published 1868; 9 copies in stock; $20 each)  
  - *Jane Eyre* by Charlotte Bronte (published 1847; 12 copies in stock; $25 each)  
  - *The Things They Carried* by Tim O'Brien (published 1990; 2 copies in stock; $17 each)  
  - *Huckleberry Finn* by Mark Twain (published 1884; 21 copies in stock; $12 each)  
  - *Siddhartha* by Hermann Hesse (published 1922; 4 copies in stock; $22 each)

## Inventory
```{r}
title <- c("The Waste Land", "Lord of the Flies", "Grapes of Wrath", "Pride and Prejudice", "Frankenstein", "Little Women", "Jane Eyre", "The Things They Carried", "Huckleberry Finn", "Siddhartha")
author <- c("T.S. Eliot", "William Golding", "John Steinbeck", "Jane Austen", "Mary Shelley", "Louisa May Alcott", "Charlotte Bronte", "Tim O'Brien", "Mark Twain", "Hermann Hesse")
pyear <- c(1922,1954,1939,1813,1818,1868,1847,1990,1884,1922)
nstock <- c(10,16,5,7,15,9,12,2,21,4)
price <- c(8,8,10,15,5,20,25,17,12,22)

bookstore <- data.frame(title, author, pyear, nstock, price)
```

## Organization
```{r}
library(dplyr)
```
```{r}
books_sorted <- bookstore %>% arrange(pyear, price)
books_sorted
```

## Sale
Your bookstore is having a sale!  

  - Books published before 1900 are 25% off  
  - Books with more than 10 copies in stock are 40% off  
  - Books published before 1900 with more than 10 copies in stock are 50% off

```{r}
sale <- bookstore %>% mutate(sale_price = ifelse(pyear < 1900 & nstock > 10, price*.5, 
                                                 ifelse(pyear < 1900, price*.75, 
                                                        ifelse(nstock > 10, price*.6, price)
                                                        )))
sale
```

## Sale price check
```{r}
sale <- sale %>% mutate(sale_percent = 1 - (sale_price / price))
sale
```

## Sale list
```{r}
salebooks <- sale %>% filter(sale_percent > 0) %>% select(author, title, sale_price)
salebooks
```


